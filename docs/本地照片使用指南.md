# 本地照片使用指南

## 概述

系统已配置为支持本地照片上传。您只需要按照命名规则将照片放入指定文件夹，系统会自动识别并使用。

## 快速开始

1. **找到照片文件夹**
   ```
   public/plant-images/
   ```

2. **按照命名规则添加照片**
   - 格式：`{植物ID}-{位置索引}.jpg`
   - 示例：`p1-0.jpg`、`p4-1.jpg`

3. **重启开发服务器**
   ```bash
   npm run dev
   # 或
   pnpm dev
   ```

## 详细说明

### 命名规则

```
{植物ID}-{位置索引}.{扩展名}
```

### 植物ID对照表

| ID | 植物名称 | 说明 |
|----|---------|------|
| p1 | 银杏 | Ginkgo biloba |
| p2 | 鸡爪槭 | Acer palmatum |
| p3 | 桂花 | Osmanthus fragrans |
| p4 | 大红袍 | Camellia sinensis |

### 位置索引

位置索引从 `0` 开始：
- `0` = 第 1 个位置
- `1` = 第 2 个位置
- `2` = 第 3 个位置
- 以此类推...

### 示例

假设您有以下植物：

**植物 p1（银杏）有 2 个位置：**
- `p1-0.jpg` - 第 1 个位置的照片
- `p1-1.jpg` - 第 2 个位置的照片

**植物 p4（大红袍）有 2 个位置：**
- `p4-0.jpg` - 第 1 个位置的照片
- `p4-1.jpg` - 第 2 个位置的照片

### 支持的图片格式

- `.jpg` / `.jpeg`
- `.png`
- `.webp`

### 图片建议

- **尺寸**：宽度 800-1200px，高度自适应
- **大小**：每张图片不超过 500KB
- **质量**：建议使用高质量图片以获得最佳显示效果

## 工作原理

1. **优先使用本地图片**
   - 系统首先尝试加载 `/plant-images/{植物ID}-{位置索引}.jpg`
   - 如果文件存在，直接使用本地图片

2. **自动备用方案**
   - 如果本地图片不存在或加载失败
   - 系统自动切换到在线备用图片（无需手动配置）

3. **无需修改代码**
   - 添加照片后，只需重启开发服务器
   - 系统会自动识别新添加的照片

## 添加新植物照片

### 步骤 1：准备照片

确保照片符合以下要求：
- 清晰度足够
- 尺寸合适（建议 800-1200px 宽度）
- 文件大小合理（< 500KB）

### 步骤 2：重命名照片

按照命名规则重命名：
```
{植物ID}-{位置索引}.jpg
```

### 步骤 3：放入文件夹

将照片放入：
```
public/plant-images/
```

### 步骤 4：重启服务器

重启开发服务器以识别新照片：
```bash
# 停止当前服务器（Ctrl+C）
# 然后重新启动
npm run dev
```

## 常见问题

### Q: 照片没有显示？
A: 请检查：
1. 文件名是否正确（区分大小写）
2. 文件是否在 `public/plant-images/` 文件夹中
3. 是否重启了开发服务器

### Q: 如何添加新植物的照片？
A: 首先在 `src/data/plantsData.ts` 中添加新植物数据，然后按照命名规则添加照片。

### Q: 可以使用其他格式吗？
A: 可以，支持 `.jpg`、`.png`、`.webp`。但建议统一使用 `.jpg` 格式。

### Q: 照片会包含在构建中吗？
A: 是的，`public` 文件夹中的文件会自动包含在构建结果中。

## 技术细节

- **图片路径**：`/plant-images/{plantId}-{locationIndex}.jpg`
- **备用机制**：`PlantImage` 组件自动处理图片加载失败的情况
- **备用配置**：`src/utils/plantImageFallbacks.ts`

## 文件结构

```
public/
  └── plant-images/
      ├── README.md          # 详细说明文档
      ├── 示例说明.txt        # 快速参考
      ├── .gitkeep          # 保持文件夹结构
      ├── p1-0.jpg          # 示例：银杏第1个位置
      ├── p4-0.jpg          # 示例：大红袍第1个位置
      └── p4-1.jpg          # 示例：大红袍第2个位置
```

## 更新日志

- ✅ 支持本地照片自动识别
- ✅ 自动备用机制
- ✅ 支持多种图片格式
- ✅ 无需修改代码即可添加照片
